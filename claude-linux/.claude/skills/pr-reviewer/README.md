# PR Reviewer Skill

GitHub PRやローカルブランチのコードレビューを実施するClaude Code Skill。

## 概要

このSkillは、コード変更に対して以下の観点でレビューを実施します：

1. **差分の取得** - GitHub PR または ローカルブランチの差分を取得
2. **コンテキスト理解** - PR説明文やユーザー提供のoutlineから変更意図を把握
3. **コードレビュー** - 品質、セキュリティ、ベストプラクティスの観点でチェック
4. **フィードバック提供** - 問題点・改善点を優先度別に日本語で報告

## 使用例

### 例1: GitHub PRレビュー（PR説明文を自動取得）

```text
ユーザー: "goldeneggg/biz リポジトリの PR #332 をレビューして"
```

- PRのdescriptionが自動的に取得され、変更の概要として使用されます

### 例2: GitHub PRレビュー（outlineを指定）

```text
ユーザー: "goldeneggg/biz の PR #15 をレビュー。outline: 認証機能のリファクタリング。JWT実装をライブラリ化して再利用可能にした"
```

- ユーザー提供のoutlineが変更の概要として使用されます

### 例3: ローカルブランチレビュー

```text
ユーザー: "fix-ai ブランチの変更をレビューして"
```

- 差分から変更内容を推測します

### 例4: ローカルブランチレビュー（outlineを指定）

```text
ユーザー: "feature/new-api ブランチをレビュー。outline: REST APIエンドポイントを3つ追加。バリデーション処理も実装"
```

- ユーザー提供のoutlineで変更の文脈を理解します

### 例5: ベースブランチを指定

```text
ユーザー: "feature/new-api ブランチを develop ブランチと比較してレビューして"
```

- mainではなくdevelopをベースブランチとして差分を取得します

## ファイル構成

```text
pr-reviewer/
├── SKILL.md          # メインSkillファイル
├── README.md         # このファイル
└── scripts/
    └── diff.sh       # 差分取得スクリプト
```

## スクリプト使用方法

### diff.sh

GitHub PRまたはローカルブランチの差分を取得します。

```bash
# GitHub PRの差分を取得
./scripts/diff.sh --repo owner/name --pr 123

# ローカルブランチの差分を取得（mainと比較）
./scripts/diff.sh --branch feature/new-api

# ローカルブランチの差分を取得（ベースブランチを指定）
./scripts/diff.sh --branch feature/new-api --base develop
```

#### オプション

| オプション | 説明                         | デフォルト |
| ---------- | ---------------------------- | ---------- |
| `--repo`   | リポジトリ（owner/name形式） | -          |
| `--pr`     | PR番号                       | -          |
| `--branch` | レビュー対象ブランチ         | -          |
| `--base`   | 比較元ベースブランチ         | `main`     |

**注意**: `--repo` と `--pr` の組み合わせ、または `--branch` のいずれかが必須です。

## レビュー観点

### コード品質

- バグや問題の導入がないか
- 適切なエラーハンドリング
- 可読性と保守性
- 命名規則とコード構成

### コーディング規約

- CLAUDE.mdの規約への準拠
- コードフォーマット
- インポート順序（stdlib → external → internal）
- テストカバレッジ

### セキュリティ

- セキュリティ脆弱性
- ハードコードされた秘密情報
- 入力バリデーション
- 暗号ライブラリの適切な使用

### ベストプラクティス

- 言語固有のベストプラクティス
- 並行処理パターン
- エラーハンドリングとロギング
- リソース管理とクリーンアップ

## フィードバック形式

レビュー結果は以下の形式で日本語で提供されます：

```markdown
## 問題点（優先度別）

### 高優先度
- 内容: ...
- 期待される内容や動作との差異: ...
- 根拠となる文献: ...

## 改善点（優先度別）

### 中優先度
- 内容: ...
- 具体的な改善方法: ...

## その他の報告事項
- ...
```
